title: The Waterfall Flows Realization
date: 2014-09-03 08:09:39
tags:
---

# 瀑布流实现

__要点：__
1. 布局计算
2. 数据异步加载
3. 浏览器事件响应
4. 图片惰性加载

## 1. 布局计算

一般来说，瀑布流实现会有两种布局定位方式，一种通过 float 浮动定位，
另一种通过 ``position: absolute;``定位。前者的好处是不需要大量计算，
但是会存在一些问题，如浏览器兼容性问题，以及 resize 过程，窗口缩小时，
元素浮动也会存在一些问题。而后者的优势在于不需要考虑过多的浏览器兼容性问题，
但是元素摆放的位置却需要经过大量计算得出。
我的实现方式是使用第二种方式。

在实际开发中， 考虑到需要浏览器需要适配的尺寸有980，1200，1420三种尺寸。
但每个元素摆放的位置其实是有固定模式的，即算法是固定的。980px 宽度下，
瀑布流是4列，1200以上是五列。 所以需要定义一个变量来计算每列的最大高度。
其实这个高度是与绝对定位 top 值有关，我们需要设置的值也是这个。

